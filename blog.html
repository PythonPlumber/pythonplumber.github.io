<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Main Page</title>
    <meta name="description" content="A man who love GNU/Linux penguin lives in sri lanka! ">
    <meta name="keywords" content="python, plumber, my web, github, zly, github.com/PythonPlumber, Python Plumber, python plumber">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">
    <meta name="author" content="Python Plumber">
    <link rel="canonical" href="https://pythonplumber.eu.org/" />
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/img/cropped.jpg">
    <link rel="icon" href="https://fonts.gstatic.com/s/e/notoemoji/latest/1f4a5/512.webp" type="image/webp"> 
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --surface-0: #050505;
            --surface-1: rgba(0, 0, 0, 0.8);
            --surface-2: rgba(0, 0, 0, 0.92);
            --accent: #0aff88;
            --accent-soft: #b4ffd0;
            --text-primary: #e4e4e4;
            --text-muted: #c4c4c4;
            --radius-lg: 16px;
            --radius-md: 12px;
            --space-1: 8px;
            --space-2: 12px;
            --space-3: 16px;
            --space-4: 24px;
            --space-5: 32px;
            --content-max: 1100px;
        }
        body {
            background-color: var(--surface-0);
            color: var(--text-primary);
            font-family: 'Roboto', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        .page {
            max-width: var(--content-max);
            margin: 0 auto;
            padding: clamp(24px, 4vw, 48px);
            display: grid;
            gap: clamp(20px, 3vw, 32px);
        }
        .page-header {
            display: grid;
            gap: 12px;
            justify-items: center;
        }
        .page-header a {
            color: var(--accent-soft);
            text-decoration: none;
            font-size: 0.8rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            border: 1px solid rgba(144, 238, 144, 0.35);
            border-radius: 999px;
            padding: 10px 18px;
            min-height: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            box-shadow: 0 0 16px rgba(0, 255, 136, 0.3);
        }
        h1 {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            font-weight: 700;
            font-size: clamp(1.8rem, 2vw + 1.2rem, 2.6rem);
            margin-bottom: 24px;
            color: var(--accent-soft);
        }
        .blog-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: clamp(16px, 2.6vw, 24px);
            padding: 0;
        }
        .blog-box {
            width: 100%;
            background-color: var(--surface-1);
            backdrop-filter: blur(18px);
            border-radius: var(--radius-md);
            border: 1px solid rgba(144, 238, 144, 0.22);
            box-shadow: 0 0 32px rgba(0, 255, 136, 0.26);
            padding: clamp(18px, 3vw, 24px);
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            cursor: pointer;
        }
        .blog-box:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 0 36px rgba(0, 255, 136, 0.4);
            border-color: rgba(0, 255, 136, 0.64);
        }
        .blog-box h2 {
            font-size: 21px;
            margin-top: 0;
            color: var(--accent-soft);
            margin-bottom: 10px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }
        .blog-box .date-created {
            font-style: italic;
            color: #888;
            margin-bottom: 10px;
        }
        .blog-box .excerpt {
            margin-bottom: 20px;
            color: var(--text-muted);
            text-align: left;
            font-family: 'Roboto', sans-serif;
        }
        .blog-box .read-more {
            display: inline-block;
            color: var(--accent);
            text-decoration: none;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-size: 0.75rem;
        }
        .pagination {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }
        .pagination button {
            background-color: var(--surface-1);
            color: #d4f7e4;
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 999px;
            padding: 10px 16px;
            min-height: 44px;
            margin: 0 4px;
            cursor: pointer;
            box-shadow: 0 0 16px rgba(0, 255, 136, 0.4);
            font-size: 0.78rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            touch-action: manipulation;
        }
        .pagination button:hover {
            background-color: rgba(0, 255, 136, 0.92);
            color: #020402;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
        }
        .pagination button:disabled {
            background-color: #888;
            cursor: not-allowed;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
        }
        .modal-content {
            position: relative;
            width: 80%;
            max-width: min(800px, 90vw);
            height: 80%;
            max-height: min(600px, 90vh);
            background-color: var(--surface-2);
            border-radius: 14px;
            padding: 22px;
            overflow: auto;
            border: 1px solid rgba(0, 255, 136, 0.38);
            box-shadow: 0 0 36px rgba(0, 255, 136, 0.7);
            color: var(--text-primary);
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #0aff88;
            font-size: 24px;
            cursor: pointer;
        }

    .footer {
      color: #fff;
      padding: 20px;
      font-size: 14px;
    }

        .blog-box:focus-within {
            box-shadow: 0 0 0 3px rgba(10, 255, 136, 0.4);
            border-color: rgba(0, 255, 136, 0.64);
        }
        .page-header a:focus-visible,
        .pagination button:focus-visible,
        .blog-box .read-more:focus-visible {
            outline: none;
            box-shadow: 0 0 0 3px rgba(10, 255, 136, 0.4);
        }
        @media (min-width: 320px) {
            .page {
                padding: 24px 16px;
            }
        }
        @media (min-width: 768px) {
            :root {
                --content-max: 1180px;
            }
            .page {
                padding: 32px 24px;
            }
            .blog-list {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        @media (min-width: 1024px) {
            :root {
                --content-max: 1240px;
            }
            .blog-list {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        @media (min-width: 1440px) {
            :root {
                --content-max: 1320px;
            }
            .blog-list {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body>
    <main class="page">
        <div class="page-header">
            <a href="index.html">Back to Portfolio</a>
            <h1>My Blogs</h1>
        </div>
        <div class="blog-list" id="blogList"></div>
        <div class="pagination" id="pagination"></div>
    </main>

    
  <div class="footer">
    &copy; 2023 Mario Python Plumber. All rights reserved.
  </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    var blogFiles = [
        'blog1.md',
        'blog2.md',
        'blog3.md',
        'blog4.md',
        'blog5.md',
    ];

    var itemsPerPage = 4;
    var currentPage = 1;
    var totalPages = Math.ceil(blogFiles.length / itemsPerPage);

    // Function to extract the title and file name from the Markdown content
    function extractMetadataFromMarkdown(markdown) {
        var titleRegex = /<!--Title:(.*?)-->/;
        var fileRegex = /<!--md_file_name:(.*?)-->/;

        var titleMatch = markdown.match(titleRegex);
        var fileMatch = markdown.match(fileRegex);

        var title = titleMatch ? titleMatch[1].trim() : 'Untitled';
        var file = fileMatch ? fileMatch[1].trim() : '';

        return { title, file };
    }

    // Function to extract the excerpt from the Markdown content
    function getExcerptFromMarkdown(markdown, maxLength) {
        var excerptRegex = /<!--short_discription:(.*?)-->/;
        var match = markdown.match(excerptRegex);
        var excerpt = match ? match[1].trim() : '';

        if (excerpt.length > maxLength) {
            excerpt = excerpt.substr(0, maxLength) + '...';
        }

        return excerpt;
    }

    // Function to generate the blog list for the current page
    function generateBlogList() {
        var blogList = document.getElementById('blogList');
        blogList.innerHTML = '';

        var startIndex = (currentPage - 1) * itemsPerPage;
        var endIndex = startIndex + itemsPerPage;

        var currentBlogs = blogFiles.slice(startIndex, endIndex);

        currentBlogs.forEach((blog) => {
            fetch('blogsmd/' + blog)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load blog');
                    }
                    return response.text();
                })
                .then(markdown => {
                    var { title, file } = extractMetadataFromMarkdown(markdown);
                    var excerpt = getExcerptFromMarkdown(markdown, 40);

                    var blogBox = document.createElement('div');
                    blogBox.className = 'blog-box';

                    var titleElement = document.createElement('h2');
                    titleElement.textContent = title;

                    var excerptElement = document.createElement('div');
                    excerptElement.className = 'excerpt';
                    excerptElement.textContent = excerpt;

                    var readMoreLink = document.createElement('a');
                    readMoreLink.className = 'read-more';
                    readMoreLink.href = '#';
                    readMoreLink.textContent = 'Read More';
                    readMoreLink.addEventListener('click', function() {
                        openMarkdownPage(file || blog, title || 'Blog');
                    });

                    blogBox.appendChild(titleElement);
                    blogBox.appendChild(excerptElement);
                    blogBox.appendChild(readMoreLink);

                    blogList.appendChild(blogBox);
                })
                .catch(() => {
                    var blogList = document.getElementById('blogList');
                    var errorBox = document.createElement('div');
                    errorBox.className = 'blog-box';
                    errorBox.textContent = 'Unable to load this post.';
                    blogList.appendChild(errorBox);
                });
        });

        generatePagination();
    }

    // Function to open the Markdown content in an iframe using the Docsify web API
    function openMarkdownPage(file, title) {
        var apiUrl = 'https://docsify-this.net';
        var normalizedFile = file.includes('/') ? file.split('/').pop() : file;
        var url = `${apiUrl}?basePath=https://raw.githubusercontent.com/PythonPlumber/pythonplumber.github.io/main/blogsmd/${normalizedFile}`;

        var modal = document.createElement('div');
        modal.className = 'modal';

        var modalContent = document.createElement('div');
        modalContent.className = 'modal-content';

        var closeButton = document.createElement('span');
        closeButton.className = 'modal-close';
        closeButton.innerHTML = '&times;';
        closeButton.addEventListener('click', function() {
            document.body.removeChild(modal);
        });

        var titleElement = document.createElement('h2');
        titleElement.textContent = title;

        var iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = 'none';

        modalContent.appendChild(closeButton);
        modalContent.appendChild(titleElement);
        modalContent.appendChild(iframe);
        modal.appendChild(modalContent);
        document.body.appendChild(modal);
    }

    // Function to generate the pagination buttons
    function generatePagination() {
        var pagination = document.getElementById('pagination');
        pagination.innerHTML = '';

        var previousButton = document.createElement('button');
        previousButton.textContent = 'Previous';
        previousButton.addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                generateBlogList();
            }
        });
        pagination.appendChild(previousButton);

        for (var i = 1; i <= totalPages; i++) {
            var pageButton = document.createElement('button');
            pageButton.textContent = i;
            pageButton.addEventListener('click', function() {
                currentPage = parseInt(this.textContent);
                generateBlogList();
            });
            pagination.appendChild(pageButton);
        }

        var nextButton = document.createElement('button');
        nextButton.textContent = 'Next';
        nextButton.addEventListener('click', function() {
            if (currentPage < totalPages) {
                currentPage++;
                generateBlogList();
            }
        });
        pagination.appendChild(nextButton);

        // Disable previous button on first page
        if (currentPage === 1) {
            previousButton.disabled = true;
        }

        // Disable next button on last page
        if (currentPage === totalPages) {
            nextButton.disabled = true;
        }
    }

    // Generate the blog list on page load
    window.addEventListener('load', generateBlogList);
</script>
</body>
</html>
